import{a as e,c as t,d as n,i as r}from"./index-Ag-KAW9e.js";var i=n(t()),a=n(r());function o({userProfile:t={}}){let[n,r]=(0,i.useState)([{sender:`bot`,text:`ğŸ‘‹ Hello ${t?.name||`Student`}! I'm your AI career mentor. Tell me about your interests and I'll provide a detailed roadmap!`,structured_data:null}]),[o,s]=(0,i.useState)(``),[c,l]=(0,i.useState)(!1),[u,d]=(0,i.useState)({name:t?.name||`Student`,interest:t?.interest||`general`}),f=(0,i.useRef)(null);(0,i.useEffect)(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[n]);let p=async()=>{let t=o.trim();if(!t||c)return;let n={sender:`user`,text:t,structured_data:null};r(e=>[...e,n]),s(``),r(e=>[...e,{sender:`bot`,text:`ğŸ¤” Analyzing your interest...`,structured_data:null}]),l(!0);try{let n=await e.post(`http://127.0.0.1:8000/chat/api/chat/`,{message:t,userProfile:u},{timeout:3e4,headers:{"Content-Type":`application/json`}});if(n.data.success)n.data.userProfile&&d(n.data.userProfile),r(e=>[...e.slice(0,-1),{sender:`bot`,text:n.data.response,structured_data:n.data.structured_data||null}]);else throw Error(n.data.error||`Unknown error`)}catch(e){console.error(`API Error:`,e);let t=e.response?.data?.error||e.message||`Unable to connect`;r(e=>[...e.slice(0,-1),{sender:`bot`,text:`âŒ ${t}`,structured_data:null}])}finally{l(!1)}};return(0,a.jsxs)(`div`,{className:`chatbot-container`,children:[(0,a.jsxs)(`div`,{className:`chat-header`,children:[(0,a.jsx)(`div`,{className:`header-left`,children:(0,a.jsx)(`h2`,{children:`ğŸ“ Career Roadmap Mentor`})}),(0,a.jsxs)(`div`,{className:`header-right`,children:[(0,a.jsxs)(`div`,{className:`profile-badge`,children:[(0,a.jsx)(`span`,{className:`profile-label`,children:`ğŸ‘¤`}),(0,a.jsx)(`span`,{className:`profile-value`,children:u.name})]}),u.interest!==`general`&&(0,a.jsxs)(`div`,{className:`profile-badge`,children:[(0,a.jsx)(`span`,{className:`profile-label`,children:`ğŸ¯`}),(0,a.jsx)(`span`,{className:`profile-value`,children:u.interest})]})]})]}),(0,a.jsx)(`div`,{className:`chat-box`,ref:f,children:n.map((e,t)=>(0,a.jsxs)(`div`,{className:`message-wrapper ${e.sender}`,children:[(0,a.jsxs)(`div`,{className:`chat-message ${e.sender===`user`?`user-message`:`bot-message`}`,children:[e.sender===`bot`&&(0,a.jsx)(`span`,{className:`bot-avatar`,children:`ğŸ¤–`}),(0,a.jsx)(`div`,{className:`message-content`,children:e.text}),e.sender===`user`&&(0,a.jsx)(`span`,{className:`user-avatar`,children:`ğŸ‘¤`})]}),e.structured_data&&(0,a.jsx)(StructuredResponseDisplay,{data:e.structured_data})]},t))}),(0,a.jsxs)(`div`,{className:`chat-input-area`,children:[(0,a.jsxs)(`div`,{className:`input-wrapper`,children:[(0,a.jsx)(`textarea`,{className:`chat-input`,placeholder:`Ask: 'tell me about cybersecurity', 'hacking roadmap', 'ca career path'... (Enter to send)`,value:o,onChange:e=>s(e.target.value),onKeyPress:e=>{e.key===`Enter`&&!e.shiftKey&&(e.preventDefault(),p())},disabled:c,rows:`2`}),(0,a.jsx)(`button`,{className:`btn-send ${c?`loading`:``}`,onClick:p,disabled:c||!o.trim(),children:c?`â³`:`ğŸ“¤`})]}),(0,a.jsx)(`div`,{className:`input-hint`,children:`ğŸ’¡ Try: "cybersecurity roadmap" or "how to become ca" or "psychology career"`})]})]})}export{o as default};