import{a as e,f as t,i as n,l as r,o as i}from"./index-CYdYr8Sb.js";var a=t(r()),o=t(e());function s(){let[e,t]=(0,a.useState)(!0),[r,s]=(0,a.useState)({email:``,password:``,name:``}),[c,l]=(0,a.useState)(``),{login:u}=(0,a.useContext)(n),d=e=>{s({...r,[e.target.name]:e.target.value})};return(0,o.jsx)(`div`,{className:`auth-container`,children:(0,o.jsxs)(`div`,{className:`auth-card`,children:[(0,o.jsx)(`h2`,{children:e?`Welcome Back`:`Create Account`}),(0,o.jsxs)(`form`,{onSubmit:async t=>{t.preventDefault(),l(``);try{if(e){let e=await i.post(`http://127.0.0.1:8000/api/login/`,{username:r.email,password:r.password});l(e.data.message),u(e.data.access,e.data.refresh,e.data.name),window.location.href=`/profile`}else{let e=await i.post(`http://127.0.0.1:8000/api/signup/`,{username:r.email,password:r.password,name:r.name});l(e.data.message),u(e.data.access,e.data.refresh,e.data.name),window.location.href=`/profile`}}catch(e){l(e.response?.data?.error||`An error occurred`),console.error(`Error:`,e)}},children:[!e&&(0,o.jsx)(`input`,{type:`text`,name:`name`,placeholder:`Full Name`,value:r.name,onChange:d,required:!0}),(0,o.jsx)(`input`,{type:`email`,name:`email`,placeholder:`Email Address`,value:r.email,onChange:d,required:!0}),(0,o.jsx)(`input`,{type:`password`,name:`password`,placeholder:`Password`,value:r.password,onChange:d,required:!0}),e&&(0,o.jsx)(`p`,{className:`forgot-password`,onClick:()=>{alert(`Redirecting to password reset flow...`)},children:`Forgot Password?`}),(0,o.jsx)(`button`,{type:`submit`,children:e?`Login`:`Sign Up`}),c&&(0,o.jsx)(`p`,{style:{color:c.includes(`error`)?`red`:`green`},children:c})]}),(0,o.jsxs)(`p`,{className:`toggle-text`,children:[e?`Don't have an account?`:`Already have an account?`,(0,o.jsx)(`span`,{onClick:()=>t(!e),children:e?` Sign Up`:` Login`})]})]})})}export{s as default};