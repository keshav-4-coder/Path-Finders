import{a as e,f as t,l as n,o as r}from"./index-FJHfbOhq.js";var i=t(n()),a=t(e());function o({userProfile:e={}}){let[t,n]=(0,i.useState)([{sender:`bot`,text:`Hello ${e?.name||`Student`}! I'm your AI career mentor. Tell me about your interests!`}]),[o,s]=(0,i.useState)(``),[c,l]=(0,i.useState)(!1),[u,d]=(0,i.useState)({name:e?.name||`Student`,interest:e?.interest||`general`}),f=(0,i.useRef)(null);(0,i.useEffect)(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[t]);let p=async()=>{let e=o.trim();if(!(!e||c)){n(t=>[...t,{sender:`user`,text:e}]),s(``),n(e=>[...e,{sender:`bot`,text:`Thinking...`}]),l(!0);try{let t=await r.post(`http://127.0.0.1:8000/chat/api/chat/`,{message:e,userProfile:u},{timeout:3e4,headers:{"Content-Type":`application/json`}});if(t.data.success)t.data.userProfile&&d(t.data.userProfile),n(e=>[...e.slice(0,-1),{sender:`bot`,text:t.data.response}]);else throw Error(t.data.error||`Unknown error`)}catch(e){console.error(`API Error:`,e);let t=e.response?.data?.error||e.message||`Unable to connect`;n(e=>[...e.slice(0,-1),{sender:`bot`,text:`Error: ${t}`}])}finally{l(!1)}}};return(0,a.jsxs)(`div`,{className:`chatbot-container`,children:[(0,a.jsxs)(`div`,{className:`chat-header`,children:[(0,a.jsx)(`h2`,{children:`AI Mentor`}),(0,a.jsxs)(`span`,{children:[u.name,` (`,u.interest,`)`]})]}),(0,a.jsx)(`div`,{className:`chat-box`,ref:f,children:t.map((e,t)=>(0,a.jsx)(`div`,{className:`message-wrapper ${e.sender}`,children:(0,a.jsx)(`div`,{className:`chat-message ${e.sender}-message`,children:(0,a.jsx)(`div`,{className:`message-content`,children:e.text})})},t))}),(0,a.jsx)(`div`,{className:`chat-input-area`,children:(0,a.jsxs)(`div`,{className:`input-wrapper`,children:[(0,a.jsx)(`textarea`,{className:`chat-input`,placeholder:`Ask about career paths or interests...`,value:o,onChange:e=>s(e.target.value),onKeyPress:e=>{e.key===`Enter`&&!e.shiftKey&&(e.preventDefault(),p())},disabled:c,rows:`2`}),(0,a.jsx)(`button`,{className:`btn-send ${c?`loading`:``}`,onClick:p,disabled:c||!o.trim(),children:c?`...`:`âž¤`})]})})]})}export{o as default};