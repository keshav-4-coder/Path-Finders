import{a as e,f as t,l as n,o as r}from"./index-ClQqgtDJ.js";var i=t(n()),a=t(e());function o({userProfile:e={}}){let[t,n]=(0,i.useState)([{sender:`bot`,text:`ğŸ‘‹ Hello ${e?.name||`Student`}! I'm your AI career mentor. Tell me about your interests and I'll provide a detailed roadmap!`,structured_data:null}]),[o,s]=(0,i.useState)(``),[c,l]=(0,i.useState)(!1),[u,d]=(0,i.useState)({name:e?.name||`Student`,interest:e?.interest||`general`}),f=(0,i.useRef)(null);(0,i.useEffect)(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[t]);let p=async()=>{let e=o.trim();if(!e||c)return;let t={sender:`user`,text:e,structured_data:null};n(e=>[...e,t]),s(``),n(e=>[...e,{sender:`bot`,text:`ğŸ¤” Analyzing your interest...`,structured_data:null}]),l(!0);try{let t=await r.post(`http://127.0.0.1:8000/chat/api/chat/`,{message:e,userProfile:u},{timeout:3e4,headers:{"Content-Type":`application/json`}});if(t.data.success)t.data.userProfile&&d(t.data.userProfile),n(e=>[...e.slice(0,-1),{sender:`bot`,text:t.data.response,structured_data:t.data.structured_data||null}]);else throw Error(t.data.error||`Unknown error`)}catch(e){console.error(`API Error:`,e);let t=e.response?.data?.error||e.message||`Unable to connect`;n(e=>[...e.slice(0,-1),{sender:`bot`,text:`âŒ ${t}`,structured_data:null}])}finally{l(!1)}};return(0,a.jsxs)(`div`,{className:`chatbot-container`,children:[(0,a.jsxs)(`div`,{className:`chat-header`,children:[(0,a.jsx)(`div`,{className:`header-left`,children:(0,a.jsx)(`h2`,{children:`ğŸ“ Career Roadmap Mentor`})}),(0,a.jsxs)(`div`,{className:`header-right`,children:[(0,a.jsxs)(`div`,{className:`profile-badge`,children:[(0,a.jsx)(`span`,{className:`profile-label`,children:`ğŸ‘¤`}),(0,a.jsx)(`span`,{className:`profile-value`,children:u.name})]}),u.interest!==`general`&&(0,a.jsxs)(`div`,{className:`profile-badge`,children:[(0,a.jsx)(`span`,{className:`profile-label`,children:`ğŸ¯`}),(0,a.jsx)(`span`,{className:`profile-value`,children:u.interest})]})]})]}),(0,a.jsx)(`div`,{className:`chat-box`,ref:f,children:t.map((e,t)=>(0,a.jsxs)(`div`,{className:`message-wrapper ${e.sender}`,children:[(0,a.jsxs)(`div`,{className:`chat-message ${e.sender===`user`?`user-message`:`bot-message`}`,children:[e.sender===`bot`&&(0,a.jsx)(`span`,{className:`bot-avatar`,children:`ğŸ¤–`}),(0,a.jsx)(`div`,{className:`message-content`,children:e.text}),e.sender===`user`&&(0,a.jsx)(`span`,{className:`user-avatar`,children:`ğŸ‘¤`})]}),e.structured_data&&(0,a.jsx)(StructuredResponseDisplay,{data:e.structured_data})]},t))}),(0,a.jsxs)(`div`,{className:`chat-input-area`,children:[(0,a.jsxs)(`div`,{className:`input-wrapper`,children:[(0,a.jsx)(`textarea`,{className:`chat-input`,placeholder:`Ask: 'tell me about cybersecurity', 'hacking roadmap', 'ca career path'... (Enter to send)`,value:o,onChange:e=>s(e.target.value),onKeyPress:e=>{e.key===`Enter`&&!e.shiftKey&&(e.preventDefault(),p())},disabled:c,rows:`2`}),(0,a.jsx)(`button`,{className:`btn-send ${c?`loading`:``}`,onClick:p,disabled:c||!o.trim(),children:c?`â³`:`ğŸ“¤`})]}),(0,a.jsx)(`div`,{className:`input-hint`,children:`ğŸ’¡ Try: "cybersecurity roadmap" or "how to become ca" or "psychology career"`})]})]})}export{o as default};